<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>SpotypotyPy</title>
        <!-- Load d3.js -->
        <script src="https://d3js.org/d3.v6.min.js"></script>

        <style>
            #box{
            display: flex;
            flex-direction: row;
            /* flex-wrap: nowrap; */
        }
        div{
            border: 2px solid pink;
            width: fit-content;
            height: fit-content;
            min-width: 50;
            min-height: 50;
            margin: auto;
            
        }
        </style>
    </head>
    <body>
        <h1>SpotypotyPy</h1>
        <div id="box">
            <div id="timeline"></div>
            <div id="modality">
                <!--Nick will make radio buttons for modality-->
                <script>
                    // Example code taken from http://bl.ocks.org/nikhilNathwani/5dca6c63a53934185d05
                    var width = 200
                    var height = 375

                    var svg = d3.select("#modality").append("svg")
                        .attr("width", width)
                        .attr("height", height);

                    // radio background
                    var background = svg.append("rect")
                        .attr("width", "100%")
                        .attr("height", "100%")
                        .attr("x",0)
                        .attr("y",0)
                        .attr("rx", 5) // rx and ry give the buttons rounded corners
                        .attr("ry", 5)
                        .attr("fill","#191414");
                    
                    // container for buttons
                    var buttons = svg.append("g")
                        .attr("id", "buttons");
                    
                    // colors for different button states 
                    var defaultColor= "#189a46"
                    var hoverColor= "#1db954"
                    var pressedColor= "#116e32"

                    var labels = ['danceability üíÉ', 'energy ‚ö°', 'loudness üîä', 'speachiness üó£Ô∏è', 'acousticness üéπ', 'instrumentalness üé∫', 'liveness üé§', 'valence üòä', 'tempo üï∞Ô∏è'];

                    // groups for each button, holding rectangle and text
                    var buttonGroups = buttons.selectAll("g.button")
                        .data(labels)
                        .enter()
                        .append("g")
                        .style("cursor","pointer")
                        .on("click",function(d,i) {
                            updateButtons(d3.select(this), d3.select(this.parentNode))
                        })
                        .on("mouseover", function() {
                            if (d3.select(this).select("rect").attr("fill") != pressedColor) {
                                d3.select(this)
                                    .select("rect")
                                    .attr("fill",hoverColor);
                            }
                        })
                        .on("mouseout", function() {
                            if (d3.select(this).select("rect").attr("fill") != pressedColor) {
                                d3.select(this)
                                    .select("rect")
                                    .attr("fill",defaultColor);
                            }
                        });

                    var bWidth = width - 30; // button width
                    var bHeight = 30; // button height
                    var bSpace = 10; // space between buttons
                    var x0 = 15; // x offset
                    var y0 = 10; // y offset

                    // adding a rect to each button group
                    buttonGroups.append("rect")
                        .attr("width", bWidth)
                        .attr("height", bHeight)
                        .attr("x", x0)
                        .attr("y", function(d,i) { return y0 + (bHeight + bSpace) * i; })
                        .attr("rx", 5) // rx and ry give the buttons rounded corners
                        .attr("ry", 5)
                        .attr("fill", defaultColor)

                    // add text to each button group
                    buttonGroups.append("text")
                        .attr("font-family","Tahoma")
                        .attr("y", function(d,i) {
                            return y0 + (bHeight + bSpace) * i + bHeight/2;
                        })
                        .attr("x", x0 + bWidth/2)
                        .attr("text-anchor", "middle")
                        .attr("dominant-baseline", "central")
                        .attr("fill", "white")
                        .style("font-size", bWidth/10 + "px")
                        .text(function(d) { return d; })
                    
                    function updateButtons(button, parent) {
                        parent.selectAll("rect").attr("fill",defaultColor)
                        button.select("rect").attr("fill",pressedColor)
                    }
                    
                </script>
            </div>
            <div id="map"></div>
        </div>
    </body>
</html>
